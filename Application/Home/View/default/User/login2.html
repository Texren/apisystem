<extend name="Base/common" />

<block name="body">

<section>
    <style>
        .span-box{
            width: 100%;
            background:url(/Public/Docapi_1/images/bg2.jpg) #ffffaa no-repeat center ;
            /*background-size:cover;*/
            background-size: auto 600px;
            background-position: 0% 0%;
            height: 600px;
            margin: 0;
            margin-top: -24px;
            margin-bottom: -70px;

        }

        .container-left{
            float: left;
            width: 500px;
            margin-top: 80px;
            margin-left:20%;
        }

        .login-aside{
            float: right;
            width:320px;
            height:380px;
            z-index:9999999;
            border-radius:5px;
            margin-right: 10%;
            margin-top: 80px;

        }

        .error-box{
            color:#f7ccc8;
            font-size:12px;
            margin-bottom:10px;
        }


        label.form-label {
            display: block;
            float: none;
            height: auto;
            line-height: 12px;
            text-align: left;
            width: auto;
            font-size:14px;
            color:#fff;
            font-weight:bold;
            text-shadow:1px 1px 1px #4e6877;
            -o-text-shadow:1px 1px 1px #4e6877;
            -o-moz-shadow:1px 1px 1px #4e6877;
            -o-mis-shadow:1px 1px 1px #4e6877;
            -o-webkit-shadow:1px 1px 1px #4e6877;
            margin-top:16px;
            margin-bottom:16px;
        }

        #o-box-up,#o-box-down {
            width:320px;
            height:380px;
            position:absolute;
            border-radius:5px;

        }
        #o-box-up {
            background-color:#000;
            filter:alpha(opacity:40);
            opacity:0.4;
        }

        #o-box-down{ padding:30px 0 0 40px;}
        input{
            clear: both;
            width:240px;
            height:37px;
            line-height:37px;

        }
        .i-text {
            clear: both;
            width:240px;
            height:37px;
            line-height:37px;
            border:1px solid #858585;
            background:#eef3f8;
            color:#9cb5cd;
            font-size:14px;
            text-indent:12px;
            box-shadow:1px 1px 1px #dfe4e8 inset;
            -moz-box-shadow:1px 1px 1px #dfe4e8 inset;
            -webkit-box-shadow:1px 1px 1px #dfe4e8 inset;
            -o-box-shadow:1px 1px 1px #dfe4e8 inset;
            -mis-box-shadow:1px 1px 1px #dfe4e8 inset;
        }

        .yzm{ width:112px;float: left;}
        .yzm-img{ width: 90px;cursor: pointer;margin-left: 10px;border-radius: 3px;}

        .btn-login-s{

            display: block;

            width:242px;
            height:38px;
            background:url(/Public/Docapi_1/images/login-btn.png) no-repeat;
            border:none;
            margin-top:5px;
        }

        .free-box{
            clear: both;
            color: #ffffff;
            width:100%;
        }


        .h-light{
            border:1px solid #80acd9;
            background:#fff;
            color:#9cb5cd;
            font-size:14px;
            text-indent:12px;
            border-color: #0787be;
            box-shadow: 0 1px 4px rgba(11, 122, 179, 0.65) inset, 0 0 14px rgba(11, 122, 179, 0.45);

        }


    </style>
	<div class="span-box">
        <div class="container-left ">
            <h2>用户登录</h2>
            <p><span class="pull-left"><span>还没有账号? <a href="{:U('User/register')}">立即注册</a></span> </span></p>
            <!------------------------->





            <!------------------------->
        </div>


        <div class="login-aside ">
            <div id="o-box-up"></div>
            <div id="o-box-down"  style="table-layout:fixed;">
                <div class="error-box"></div>

                <form class="login-form" action="__SELF__" method="post">
                    <div class="fm-item">
                        <label for="logonId" class="form-label">登陆用户名：</label>
                        <input type="text" id="inputEmail" class="i-text" placeholder="请输入用户名"  ajaxurl="/member/checkUserNameUnique.html" errormsg="请填写1-16位用户名" nullmsg="请填写用户名" datatype="*1-16" value="" name="username">
                        <div class="ui-form-explain"></div>
                    </div>

                    <div class="fm-item">
                        <label for="logonId" class="form-label">登陆密码：</label>
                        <input type="password" id="inputPassword"  class="i-text" placeholder="请输入密码"  errormsg="密码为6-20位" nullmsg="请填写密码" datatype="*6-20" name="password">
                        <div class="ui-form-explain"></div>
                    </div>

                    <div class="fm-item pos-r">
                        <label for="logonId" class="form-label">验证码</label>
                        <input type="text" id="inputPassword" class="i-text yzm" placeholder="请输入验证码"  errormsg="请填写5位验证码" nullmsg="请填写验证码" datatype="*5-5" name="verify">
                        <div class="ui-form-explain">
                            <img class="verifyimg reloadverify yzm-img" alt="点击切换" src="{:U('verify')}" style="cursor:pointer;">
                        </div>
                    </div>

                    <div class="fm-item">
                        <label for="logonId" class="form-label">

                        </label>
                        <div class="free-box">
                            <input type="checkbox" name="autologin" > 自动登陆
                        </div>

                        <input type="submit"  tabindex="4" id="send-btn" class="btn-login-s">






                        <div class="ui-form-explain"></div>
                    </div>

                </form>

            </div>

        </div>

	</div>




</section>
</block>

<block name="side"> </block>
<block name="script">
	<script type="text/javascript">

    	$(document)
	    	.ajaxStart(function(){
	    		$("button:submit").addClass("log-in").attr("disabled", true);
	    	})
	    	.ajaxStop(function(){
	    		$("button:submit").removeClass("log-in").attr("disabled", false);
	    	});


    	$("form").submit(function(){
    		var self = $(this);
    		$.post(self.attr("action"), self.serialize(), success, "json");
    		return false;

    		function success(data){
    			if(data.status){
    				window.location.href = data.url;
    			} else {
    				self.find(".Validform_checktip").text(data.info);
    				//刷新验证码
    				$(".reloadverify").click();
    			}
    		}
    	});

		$(function(){
			var verifyimg = $(".verifyimg").attr("src");
            $(".reloadverify").click(function(){
                if( verifyimg.indexOf('?')>0){
                    $(".verifyimg").attr("src", verifyimg+'&random='+Math.random());
                }else{
                    $(".verifyimg").attr("src", verifyimg.replace(/\?.*$/,'')+'?'+Math.random());
                }
            });
		});
	</script>
</block>
